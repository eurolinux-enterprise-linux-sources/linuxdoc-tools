#!@PERL@ @PERLWARN@
#
#   linuxdoc.in
#
#   LinuxDoc-Tools driver. Calls all other LinuxDoc-Tools components,
#   contains configuration information, etcetera.
# -------------------------------------------------------------------

package main;

sub BEGIN {
  require 5.004;
}

use strict;

use vars qw($prefix $DataDir $AuxBinDir $progs);

$prefix      = "@prefix@";
$DataDir     = "@pkgdatadir@";
$AuxBinDir   = "@auxbindir@";

use lib "@pkgdatadir@";
use lib "@perl5libdir@";

# ---------------------------------------------------------------------
sub ldt_which {
# ---------------------------------------------------------------------
# ---------------------------------------------------------------------
  die "ldt_which: No filename(s) array given. Aborting ...\n" unless scalar @_;

  foreach my $file ( @_ ){
    if ( $file =~ m/\// ) {
      return $file if -x $file;
    } else {
      foreach my $path ( split(':',$ENV{'PATH'}) ){
	$path =~ s/\/+$//;
	return $file if -x "$path/$file";
      }
    }
  }
  die "No executable found in path for (", join(' ',@_) ,"). Aborting ...\n";
}

$progs   = {
  "SGMLSASP"   => ldt_which("sgmlsasp"),
  "NSGMLS"     => ldt_which("nsgmls","onsgmls"),
  "AWK"        => ldt_which("gawk","mawk","nawk"),
  "GROFF"      => ldt_which("groff"),
  "GROFFMACRO" => "@GROFFMACRO@",
#  "NKF" => "@NKF@"
};

require LinuxDocTools;
&LinuxDocTools::init;

my @FileList = LinuxDocTools::process_options ($0, @ARGV);

foreach my $curfile (@FileList) {
  &LinuxDocTools::process_file ($curfile);
}

exit 0;

# Local Variables:
#  mode: perl
# End:
